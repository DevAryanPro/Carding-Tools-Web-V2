<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Tools & BIN Checker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Geist:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'geist': ['Geist', 'sans-serif'],
                    },
                    colors: {
                        primary: '#000000',
                    }
                }
            }
        }
    </script>
</head>
<body class="font-geist bg-white min-h-screen flex flex-col items-center justify-center p-4">
    <div class="w-full max-w-4xl bg-white border border-gray-200 rounded-2xl p-6 md:p-8 mb-6">
        <h1 class="text-2xl md:text-3xl font-bold text-center text-gray-900 mb-6 md:mb-8">Card Tools</h1>
        
        <div class="grid grid-cols-2 md:grid-cols-4 gap-2 bg-gray-50 p-2 rounded-xl border border-gray-200 mb-6 md:mb-8">
            <button class="tab-btn py-3 px-2 md:px-4 text-xs md:text-sm font-semibold rounded-lg bg-primary text-white transition-colors flex items-center justify-center gap-2" data-tab="card-generator">
                <i data-lucide="credit-card" class="w-4 h-4"></i>
                <span class="hidden sm:inline">Card Generator</span>
                <span class="sm:hidden">Cards</span>
            </button>
            <button class="tab-btn py-3 px-2 md:px-4 text-xs md:text-sm font-semibold rounded-lg text-gray-600 hover:text-gray-900 transition-colors flex items-center justify-center gap-2" data-tab="bin-generator">
                <i data-lucide="database" class="w-4 h-4"></i>
                <span class="hidden sm:inline">BIN Gen</span>
                <span class="sm:hidden">BINs</span>
            </button>
            <button class="tab-btn py-3 px-2 md:px-4 text-xs md:text-sm font-semibold rounded-lg text-gray-600 hover:text-gray-900 transition-colors flex items-center justify-center gap-2" data-tab="bin-checker">
                <i data-lucide="search" class="w-4 h-4"></i>
                <span class="hidden sm:inline">BIN Checker</span>
                <span class="sm:hidden">Check</span>
            </button>
            <button class="tab-btn py-3 px-2 md:px-4 text-xs md:text-sm font-semibold rounded-lg text-gray-600 hover:text-gray-900 transition-colors flex items-center justify-center gap-2" data-tab="stripe-checker">
                <i data-lucide="shield-check" class="w-4 h-4"></i>
                <span class="hidden sm:inline">Stripe Check</span>
                <span class="sm:hidden">Stripe</span>
            </button>
        </div>

        <!-- Card Generator Tab -->
        <div class="tab-content active" id="card-generator">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2 uppercase tracking-wide">BIN (Card Prefix)</label>
                    <input type="text" id="bin" placeholder="e.g., 4242 or leave empty" 
                           class="w-full px-4 py-3 border border-gray-300 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2 uppercase tracking-wide">Amount</label>
                    <input type="number" id="amount" placeholder="1" value="1" min="1" max="100"
                           class="w-full px-4 py-3 border border-gray-300 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400">
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2 uppercase tracking-wide">Month (MM)</label>
                    <select id="month" class="w-full px-4 py-3 border border-gray-300 rounded-xl text-gray-900 focus:outline-none focus:border-gray-400 appearance-none bg-white">
                        <option value="">Random</option>
                        <option value="01">01</option>
                        <option value="02">02</option>
                        <option value="03">03</option>
                        <option value="04">04</option>
                        <option value="05">05</option>
                        <option value="06">06</option>
                        <option value="07">07</option>
                        <option value="08">08</option>
                        <option value="09">09</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2 uppercase tracking-wide">Year (YYYY)</label>
                    <select id="year" class="w-full px-4 py-3 border border-gray-300 rounded-xl text-gray-900 focus:outline-none focus:border-gray-400 appearance-none bg-white">
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2 uppercase tracking-wide">CVV</label>
                    <input type="text" id="cvv" placeholder="Auto-generate"
                           class="w-full px-4 py-3 border border-gray-300 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400">
                </div>
            </div>

            <button id="generateBtn" onclick="generateCards()" 
                    class="w-full py-4 bg-primary text-white font-semibold rounded-xl uppercase tracking-wide flex items-center justify-center gap-2">
                <i data-lucide="sparkles" class="w-5 h-5"></i>
                Generate Cards
            </button>

            <div class="result-box hidden mt-6 p-6 bg-gray-50 border border-gray-200 rounded-xl font-mono text-sm" id="cardsResultBox"></div>

            <div class="grid grid-cols-2 gap-3 mt-4 hidden" id="copyButtons">
                <button class="copy-btn py-3 bg-gray-800 text-white font-semibold rounded-xl flex items-center justify-center gap-2" onclick="copyAllCards()">
                    <i data-lucide="copy" class="w-4 h-4"></i>
                    Copy All
                </button>
                <button class="copy-btn py-3 bg-gray-300 text-gray-700 font-semibold rounded-xl flex items-center justify-center gap-2" onclick="clearCards()">
                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                    Clear
                </button>
            </div>
        </div>

        <!-- BIN Generator Tab -->
        <div class="tab-content hidden" id="bin-generator">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2 uppercase tracking-wide">Card Type</label>
                    <select id="cardType" class="w-full px-4 py-3 border border-gray-300 rounded-xl text-gray-900 focus:outline-none focus:border-gray-400 appearance-none bg-white">
                        <option value="visa">Visa</option>
                        <option value="mastercard">Mastercard</option>
                        <option value="amex">American Express</option>
                        <option value="discover">Discover</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2 uppercase tracking-wide">Generation Mode</label>
                    <select id="generationMode" class="w-full px-4 py-3 border border-gray-300 rounded-xl text-gray-900 focus:outline-none focus:border-gray-400 appearance-none bg-white">
                        <option value="random">Generate Randomly</option>
                        <option value="database">Grab from Database</option>
                    </select>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-semibold text-gray-700 mb-2 uppercase tracking-wide">Amount</label>
                <input type="number" id="binAmount" placeholder="1" value="1" min="1" max="100"
                       class="w-full px-4 py-3 border border-gray-300 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400">
            </div>

            <button id="binGenerateBtn" onclick="generateBINs()" 
                    class="w-full py-4 bg-primary text-white font-semibold rounded-xl uppercase tracking-wide flex items-center justify-center gap-2">
                <i data-lucide="database" class="w-5 h-5"></i>
                Generate BINs
            </button>

            <div class="result-box hidden mt-6 p-6 bg-gray-50 border border-gray-200 rounded-xl font-mono text-sm" id="binResultBox"></div>

            <div class="grid grid-cols-2 gap-3 mt-4 hidden" id="binCopyButtons">
                <button class="copy-btn py-3 bg-gray-800 text-white font-semibold rounded-xl flex items-center justify-center gap-2" onclick="copyAllBINs()">
                    <i data-lucide="copy" class="w-4 h-4"></i>
                    Copy All
                </button>
                <button class="copy-btn py-3 bg-gray-300 text-gray-700 font-semibold rounded-xl flex items-center justify-center gap-2" onclick="clearBINs()">
                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                    Clear
                </button>
            </div>
        </div>

        <!-- BIN Checker Tab -->
        <div class="tab-content hidden" id="bin-checker">
            <div class="mb-6">
                <label class="block text-sm font-semibold text-gray-700 mb-2 uppercase tracking-wide">BIN Numbers (one per line)</label>
                <textarea id="binInput" placeholder="434907&#10;402360&#10;411111" 
                          class="w-full px-4 py-3 border border-gray-300 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400 min-h-32 font-mono text-sm"></textarea>
            </div>

            <button id="checkBinBtn" onclick="checkBulkBINs()" 
                    class="w-full py-4 bg-primary text-white font-semibold rounded-xl uppercase tracking-wide flex items-center justify-center gap-2">
                <i data-lucide="search" class="w-5 h-5"></i>
                Check BINs
            </button>

            <div class="hidden mt-6" id="binStats">
                <div class="grid grid-cols-2 gap-4 md:gap-6 p-4 md:p-6 bg-gray-50 border border-gray-200 rounded-xl">
                    <div>
                        <div class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1">Database</div>
                        <div id="totalDatabase" class="text-xl md:text-2xl font-bold text-gray-900"></div>
                    </div>
                    <div>
                        <div class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1">Checked BINs</div>
                        <div id="checkedBins" class="text-xl md:text-2xl font-bold text-gray-900"></div>
                    </div>
                </div>
            </div>

            <div id="binInfoContainer" class="mt-6 space-y-4"></div>
        </div>

        <!-- Stripe Checker Tab -->
        <div class="tab-content hidden" id="stripe-checker">
            <div class="mb-6">
                <label class="block text-sm font-semibold text-gray-700 mb-2 uppercase tracking-wide">Cards to Check (one per line)</label>
                <textarea id="cardsInput" placeholder="4242424242424242|03|2029|123&#10;5555555555554444|12|2028|456" 
                          class="w-full px-4 py-3 border border-gray-300 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:border-gray-400 min-h-32 font-mono text-sm"></textarea>
            </div>

            <button id="checkBtn" onclick="checkCards()" 
                    class="w-full py-4 bg-primary text-white font-semibold rounded-xl uppercase tracking-wide flex items-center justify-center gap-2">
                <i data-lucide="shield-check" class="w-5 h-5"></i>
                Check Cards
            </button>

            <div class="mt-6">
                <div class="w-full bg-gray-200 rounded-full h-2 hidden" id="progressBar">
                    <div class="bg-green-600 h-2 rounded-full transition-all duration-300" id="progressFill" style="width: 0%"></div>
                </div>
            </div>

            <div class="checker-results mt-6 space-y-4" id="checkerResults"></div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        let generatedCardsList = [];
        let generatedBINsList = [];
        let checkedBINsSet = new Set();
        let totalDatabaseBINs = 0;
        let isChecking = false;

        // Initialize year dropdown
        const yearSelect = document.getElementById('year');
        const currentYear = new Date().getFullYear();
        yearSelect.innerHTML = '<option value="">Random</option>';
        for (let year = currentYear; year <= currentYear + 10; year++) {
            const option = document.createElement('option');
            option.value = year;
            option.textContent = year;
            yearSelect.appendChild(option);
        }

        // Tab switching functionality
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // Update active tab button
                document.querySelectorAll('.tab-btn').forEach(b => {
                    b.classList.remove('bg-primary', 'text-white');
                    b.classList.add('text-gray-600', 'hover:text-gray-900');
                });
                this.classList.add('bg-primary', 'text-white');
                this.classList.remove('text-gray-600', 'hover:text-gray-900');
                
                // Update active tab content
                const tabId = this.getAttribute('data-tab');
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                    content.classList.add('hidden');
                });
                document.getElementById(tabId).classList.add('active');
                document.getElementById(tabId).classList.remove('hidden');
                
                // Refresh icons for the new tab
                lucide.createIcons();
            });
        });

        // API Functions with proper Flask endpoints
        async function generateCards() {
            const bin = document.getElementById('bin').value;
            const month = document.getElementById('month').value;
            const year = document.getElementById('year').value;
            const cvv = document.getElementById('cvv').value;
            const amount = parseInt(document.getElementById('amount').value) || 1;

            const btn = document.getElementById('generateBtn');
            btn.disabled = true;
            btn.innerHTML = '<i data-lucide="loader-2" class="w-5 h-5 animate-spin"></i>Generating...';
            lucide.createIcons();

            generatedCardsList = [];
            const resultBox = document.getElementById('cardsResultBox');
            resultBox.innerHTML = '';
            resultBox.classList.add('hidden');
            document.getElementById('copyButtons').classList.add('hidden');

            try {
                const response = await fetch('/generate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    'X-Requested-With': 'XMLHttpRequest'
                    },
                    body: JSON.stringify({ 
                        bin: bin, 
                        month: month, 
                        year: year, 
                        cvv: cvv,
                        amount: amount 
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                
                if (data.cards && Array.isArray(data.cards)) {
                    generatedCardsList = data.cards;
                    resultBox.textContent = generatedCardsList.join('\n');
                    resultBox.classList.remove('hidden');
                    document.getElementById('copyButtons').classList.remove('hidden');
                } else {
                    throw new Error('Invalid response format');
                }

            } catch (error) {
                console.error('Error generating cards:', error);
                resultBox.textContent = 'Error generating cards. Please try again.';
                resultBox.classList.remove('hidden');
            }

            btn.disabled = false;
            btn.innerHTML = '<i data-lucide="sparkles" class="w-5 h-5"></i>Generate Cards';
            lucide.createIcons();
        }

        async function generateBINs() {
            const cardType = document.getElementById('cardType').value;
            const mode = document.getElementById('generationMode').value;
            const amount = parseInt(document.getElementById('binAmount').value) || 1;

            const btn = document.getElementById('binGenerateBtn');
            btn.disabled = true;
            btn.innerHTML = '<i data-lucide="loader-2" class="w-5 h-5 animate-spin"></i>Generating...';
            lucide.createIcons();

            generatedBINsList = [];
            const resultBox = document.getElementById('binResultBox');
            resultBox.innerHTML = '';
            resultBox.classList.add('hidden');
            document.getElementById('binCopyButtons').classList.add('hidden');

            try {
                const response = await fetch('/generate_bin', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    body: JSON.stringify({ 
                        card_type: cardType, 
                        mode: mode,
                        amount: amount 
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                
                if (data.bins && Array.isArray(data.bins)) {
                    generatedBINsList = data.bins;
                    resultBox.textContent = generatedBINsList.join('\n');
                    resultBox.classList.remove('hidden');
                    document.getElementById('binCopyButtons').classList.remove('hidden');
                } else {
                    throw new Error('Invalid response format');
                }

            } catch (error) {
                console.error('Error generating BINs:', error);
                resultBox.textContent = 'Error generating BINs. Please try again.';
                resultBox.classList.remove('hidden');
            }

            btn.disabled = false;
            btn.innerHTML = '<i data-lucide="database" class="w-5 h-5"></i>Generate BINs';
            lucide.createIcons();
        }

        async function checkBulkBINs() {
            const binInput = document.getElementById('binInput').value;
            const bins = binInput.split('\n').filter(line => line.trim() !== '');
            
            if (bins.length === 0) {
                alert('Please enter at least one BIN number');
                return;
            }

            const btn = document.getElementById('checkBinBtn');
            btn.disabled = true;
            btn.innerHTML = '<i data-lucide="loader-2" class="w-5 h-5 animate-spin"></i>Checking...';
            lucide.createIcons();

            const container = document.getElementById('binInfoContainer');
            container.innerHTML = '';
            
            document.getElementById('binStats').classList.add('hidden');
            checkedBINsSet.clear();

            for (let i = 0; i < bins.length; i++) {
                const binNumber = bins[i].trim();
                
                // Update progress
                const progress = ((i + 1) / bins.length) * 100;
                document.getElementById('progressFill').style.width = progress + '%';
                
                if (binNumber.length !== 6 || !/^\d+$/.test(binNumber)) {
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'p-4 bg-red-50 border border-red-200 rounded-xl';
                    errorDiv.innerHTML = `
                        <div class="flex justify-between items-center">
                            <span class="text-sm font-semibold text-gray-700 uppercase tracking-wide">BIN</span>
                            <span class="text-red-600 font-medium">${binNumber} - Invalid Format</span>
                        </div>
                    `;
                    container.appendChild(errorDiv);
                    continue;
                }

                try {
                    const response = await fetch('/check_bin', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        body: JSON.stringify({ bin: binNumber })
                    });

                    if (response.ok) {
                        const data = await response.json();
                        checkedBINsSet.add(binNumber);
                        totalDatabaseBINs = data.total_database || 0;
                        
                        const binInfoDiv = document.createElement('div');
                        binInfoDiv.className = 'p-4 bg-gray-50 border border-gray-200 rounded-xl';
                        binInfoDiv.innerHTML = `
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span class="text-sm font-semibold text-gray-700 uppercase tracking-wide">BIN</span>
                                    <span class="text-gray-900 font-medium">${data.bin}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm font-semibold text-gray-700 uppercase tracking-wide">Brand</span>
                                    <span class="text-gray-900 font-medium">${data.brand}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm font-semibold text-gray-700 uppercase tracking-wide">Type</span>
                                    <span class="text-gray-900 font-medium">${data.type}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm font-semibold text-gray-700 uppercase tracking-wide">Issuer</span>
                                    <span class="text-gray-900 font-medium">${data.issuer}</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-sm font-semibold text-gray-700 uppercase tracking-wide">Country</span>
                                    <span class="text-gray-900 font-medium">${data.country}</span>
                                </div>
                            </div>
                        `;
                        container.appendChild(binInfoDiv);
                    } else {
                        const errorData = await response.json();
                        totalDatabaseBINs = errorData.total_database || 0;
                        
                        const errorDiv = document.createElement('div');
                        errorDiv.className = 'p-4 bg-gray-50 border border-gray-200 rounded-xl';
                        errorDiv.innerHTML = `
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-semibold text-gray-700 uppercase tracking-wide">BIN</span>
                                <span class="text-gray-500 font-medium">${binNumber} - Not Found</span>
                            </div>
                        `;
                        container.appendChild(errorDiv);
                    }
                } catch (error) {
                    console.error('Error checking BIN:', error);
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'p-4 bg-red-50 border border-red-200 rounded-xl';
                    errorDiv.innerHTML = `
                        <div class="flex justify-between items-center">
                            <span class="text-sm font-semibold text-gray-700 uppercase tracking-wide">BIN</span>
                            <span class="text-red-600 font-medium">${binNumber} - Network Error</span>
                        </div>
                    `;
                    container.appendChild(errorDiv);
                }
                
                // Small delay to prevent overwhelming the server
                await new Promise(resolve => setTimeout(resolve, 100));
            }
            
            // Show statistics
            document.getElementById('binStats').classList.remove('hidden');
            document.getElementById('totalDatabase').textContent = totalDatabaseBINs.toLocaleString();
            document.getElementById('checkedBins').textContent = checkedBINsSet.size.toLocaleString();
            
            btn.disabled = false;
            btn.innerHTML = '<i data-lucide="search" class="w-5 h-5"></i>Check BINs';
            lucide.createIcons();
        }

        async function checkCards() {
            if (isChecking) return;
            
            const cardsInput = document.getElementById('cardsInput').value;
            const cards = cardsInput.split('\n').filter(line => line.trim() !== '');
            
            if (cards.length === 0) {
                alert('Please enter at least one card');
                return;
            }

            isChecking = true;
            const btn = document.getElementById('checkBtn');
            btn.disabled = true;
            btn.innerHTML = '<i data-lucide="loader-2" class="w-5 h-5 animate-spin"></i>Checking...';
            lucide.createIcons();
            
            document.getElementById('checkerResults').innerHTML = '';
            document.getElementById('progressBar').classList.remove('hidden');

            for (let i = 0; i < cards.length; i++) {
                const card = cards[i].trim();
                
                // Update progress
                const progress = ((i + 1) / cards.length) * 100;
                document.getElementById('progressFill').style.width = progress + '%';
                
                try {
                    const response = await fetch('/check', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        body: JSON.stringify({ card: card })
                    });

                    let result;
                    if (response.ok) {
                        result = await response.json();
                    } else {
                        result = {
                            card: card,
                            status: 'UNKNOWN',
                            message: "Server error - please try again"
                        };
                    }
                    
                    // Ensure message is not empty
                    if (!result.message || result.message.trim() === '') {
                        result.message = "The card didn't go through stripe's server, Try again";
                        result.status = 'UNKNOWN';
                    }
                    
                    displayResult(result);
                } catch (error) {
                    console.error('Error checking card:', error);
                    displayResult({
                        card: card,
                        status: 'ERROR',
                        message: 'Network error - please check your connection'
                    });
                }
                
                // Rate limiting delay
                if (i < cards.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 1000));
                }
            }
            
            isChecking = false;
            btn.disabled = false;
            btn.innerHTML = '<i data-lucide="shield-check" class="w-5 h-5"></i>Check Cards';
            document.getElementById('progressBar').classList.add('hidden');
            lucide.createIcons();
        }

        function displayResult(result) {
            const resultsDiv = document.getElementById('checkerResults');
            const resultCard = document.createElement('div');
            
            const statusColors = {
                'SUCCESS': 'bg-green-50 border-green-200',
                'FAIL': 'bg-red-50 border-red-200',
                'UNKNOWN': 'bg-yellow-50 border-yellow-200',
                'ERROR': 'bg-gray-50 border-gray-200'
            };
            
            const statusTexts = {
                'SUCCESS': 'APPROVED',
                'FAIL': 'DECLINED',
                'UNKNOWN': 'UNKNOWN',
                'ERROR': 'ERROR'
            };
            
            const statusTextColors = {
                'SUCCESS': 'text-green-600',
                'FAIL': 'text-red-600',
                'UNKNOWN': 'text-yellow-600',
                'ERROR': 'text-gray-600'
            };
            
            const statusIcons = {
                'SUCCESS': 'check-circle',
                'FAIL': 'x-circle',
                'UNKNOWN': 'help-circle',
                'ERROR': 'alert-circle'
            };
            
            resultCard.className = `p-4 border rounded-xl ${statusColors[result.status] || statusColors.UNKNOWN}`;
            
            resultCard.innerHTML = `
                <div class="font-mono text-gray-900 font-semibold mb-2 text-sm">${result.card}</div>
                <div class="flex items-center gap-2">
                    <i data-lucide="${statusIcons[result.status] || 'help-circle'}" class="w-4 h-4 ${statusTextColors[result.status] || statusTextColors.UNKNOWN}"></i>
                    <span class="px-3 py-1 rounded-full text-xs font-semibold ${statusTextColors[result.status] || statusTextColors.UNKNOWN} bg-white border">
                        ${statusTexts[result.status] || statusTexts.UNKNOWN}
                    </span>
                    <span class="text-gray-700 text-sm">${result.message}</span>
                </div>
            `;
            
            resultsDiv.appendChild(resultCard);
            lucide.createIcons();
        }

        // Utility functions
        function copyAllCards() {
            const allCards = generatedCardsList.join('\n');
            navigator.clipboard.writeText(allCards);
            
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i data-lucide="check" class="w-4 h-4"></i>Copied!';
            setTimeout(() => {
                btn.innerHTML = originalText;
                lucide.createIcons();
            }, 2000);
        }

        function copyAllBINs() {
            const allBINs = generatedBINsList.join('\n');
            navigator.clipboard.writeText(allBINs);
            
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i data-lucide="check" class="w-4 h-4"></i>Copied!';
            setTimeout(() => {
                btn.innerHTML = originalText;
                lucide.createIcons();
            }, 2000);
        }

        function clearCards() {
            generatedCardsList = [];
            document.getElementById('cardsResultBox').innerHTML = '';
            document.getElementById('cardsResultBox').classList.add('hidden');
            document.getElementById('copyButtons').classList.add('hidden');
        }

        function clearBINs() {
            generatedBINsList = [];
            document.getElementById('binResultBox').innerHTML = '';
            document.getElementById('binResultBox').classList.add('hidden');
            document.getElementById('binCopyButtons').classList.add('hidden');
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
        });
    </script>
</body>
</html>
